(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{85:function(t,e,n){"use strict";var a;n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return s});var r={width:"width",height:"height",states:"states",status:"status"},i=((a={})[r.width]=700,a[r.height]=700,a[r.states]=16,a),o={play:"Play",pause:"Pause"},s=32},86:function(t,e,n){t.exports={field:"GriffeathMachine__field__2ugWL",bigButton:"GriffeathMachine__bigButton__1GY-9"}},89:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),r=(n(1),n(83)),u=n(85),i=n(86),c=n.n(i);function l(t){for(var e=t.width,n=t.height,a=t.states,r=[],i=0;i<e;i+=1){r[i]=[];for(var o=0;o<n;o+=1)r[i][o]=Math.floor(Math.random()*a)}return r}var f=function(t,e){return t<0?t+e:t%e},h=function(t){var r=t.field,i=t.width,o=t.height,s=t.states;return r.map(function(t,a){return t.map(function(t,e){var n=f(t+1,s);return r[a][f(e-1,o)]===n||r[a][f(e+1,o)]===n||r[f(a-1,i)][e]===n||r[f(a+1,i)][e]===n?n:t})})};var p=[],d={r:0,g:0,b:0};function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var y=function(r){function i(){var t,c;!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=c=o(this,r.call.apply(r,[this].concat(n))),c.drawPixel=function(t,e,n,a){var r=t+e*c.props.width,i=function(t,e){if(p.length!==e){p.length=e;for(var n=0;n<e;n+=1)p[n]=(void 0,i=(r=function(t){var e=t<0?t+1:t%1;return e<1/6?6*e:e<.5?1:e<2/3?6*(2/3-e):0})((a=n/e)+1/3),o=r(a),s=r(a-1/3),{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*s)})}var a,r,i,o,s;return p[t]||d}(n,a),o=i.r,s=i.g,u=i.b;c.uInt32Array[r]=255<<24|u<<16|s<<8|o},c.paint=function(t){var e=c.props,n=e.width,a=e.height,r=e.states;c.uInt32Array=new Uint32Array(n*a);for(var i=0;i<n;i+=1)for(var o=0;o<a;o+=1)t[i]&&c.drawPixel(i,o,t[i][o],r);var s=new ImageData(new Uint8ClampedArray(c.uInt32Array.buffer),n,a);c.canvasContext.putImageData(s,0,0)},c.refCanvas=function(t){t&&(c.canvasContext=t.getContext("2d"))},o(c,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,r),i.prototype.render=function(){return s.a.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")},i}(s.a.PureComponent);n.d(e,"default",function(){return E});var b,m,w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var g=s.a.createElement("p",null,s.a.createElement("em",null,"Press Space or click field for play / pause")),E=(m=b=function(i){function o(){var t,a;!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=a=v(this,i.call.apply(i,[this].concat(n))),a.state={width:a.props.width,height:a.props.height,states:a.props.states,status:u.d.pause},a.field=null,a.canvas=s.a.createRef(),a.getActionName=function(){return a.state.status===u.d.play?u.d.pause:u.d.play},a.randomizeField=function(){a.field=l(a.state)},a.processKey=function(t){t.keyCode===u.c&&(t.preventDefault(),a.handlePlay())},a.nextStep=function(){try{a.field=h(w({},a.state,{field:a.field})),a.state.status===u.d.play&&(a.requestID=requestAnimationFrame(a.nextStep))}catch(t){cancelAnimationFrame(a.requestID),a.field=l(a.state),a.setState({status:u.d.pause})}a.canvas.current.paint(a.field)},a.handleNew=function(){a.randomizeField(),a.canvas.current.paint(a.field)},a.handleNext=function(){a.field=h(w({},a.state,{field:a.field})),a.canvas.current.paint(a.field)},a.handlePlay=function(){switch(a.state.status){case u.d.play:a.setState({status:u.d.pause});break;case u.d.pause:a.setState({status:u.d.play},a.nextStep)}},a.changeHandler=function(t,e){var n;a.setState(((n={})[t]=e,n))},v(a,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype.componentWillMount=function(){this.randomizeField(),this.handlePlay(),document.addEventListener("keydown",this.processKey)},o.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.requestID)},o.prototype.render=function(){return s.a.createElement("div",null,s.a.createElement(r.a,{state:this.state,onChange:this.changeHandler},s.a.createElement(r.b,{id:u.b.width,label:"Field width",defaultNum:1}),s.a.createElement(r.b,{id:u.b.height,label:"Field height",defaultNum:1}),s.a.createElement(r.b,{id:u.b.states,label:"Number of states",defaultNum:1})),s.a.createElement("div",{onClick:this.handlePlay,onKeyDown:this.processKey,className:c.a.field,role:"presentation",title:this.getActionName()},s.a.createElement(y,{width:this.state.width,height:this.state.height,states:this.state.states,ref:this.canvas})),g,s.a.createElement("button",{type:"button",className:c.a.bigButton,onClick:this.handleNew},"New"),s.a.createElement("button",{type:"button",className:c.a.bigButton,onClick:this.handlePlay},this.getActionName()),this.state.status===u.d.pause&&s.a.createElement("button",{type:"button",className:c.a.bigButton,onClick:this.handleNext},"Next step"))},o}(a.PureComponent),b.defaultProps=w({},u.a),m)}}]);