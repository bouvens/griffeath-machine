(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(t,e,n){n(19),t.exports=n(40)},28:function(t,e,n){},4:function(t,e,n){t.exports={field:"GriffeathMachine__field__rXP46",bigButton:"GriffeathMachine__bigButton__1sICS"}},40:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(6);n(28),n(2);var i=r.a.createElement("h1",null,"I'm sorry. Something went wrong."),s=r.a.createElement("button",{onClick:function(){window.location.reload()},type:"button"},"Reload"),c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.state={hasError:!1},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidCatch=function(){this.setState({hasError:!0})},e.prototype.render=function(){return this.state.hasError?[i,s]:this.props.children},e}(r.a.Component),l=n(5);function u(t){for(var e=t.width,n=t.height,a=t.states,r=[],o=0;o<e;o+=1){r[o]=[];for(var i=0;i<n;i+=1)r[o][i]=Math.floor(Math.random()*a)}return r}var p=function(t,e){return t<0?t+e:t%e},f=function(t){var e=t.field,n=t.width,a=t.height,r=t.states;return e.map(function(t,o){return t.map(function(t,i){var s=p(t+1,r);return e[o][p(i-1,a)]===s||e[o][p(i+1,a)]===s||e[p(o-1,n)][i]===s||e[p(o+1,n)][i]===s?s:t})})};function h(t){var e=function(t){var e=t<0?t+1:t%1;return e<1/6?6*e:e<.5?1:e<2/3?6*(2/3-e):0},n=e(t+1/3),a=e(t),r=e(t-1/3);return{r:Math.round(255*n),g:Math.round(255*a),b:Math.round(255*r)}}var d,m=[],y={r:0,g:0,b:0};var b="width",w="height",v="states",g=((d={})[b]=500,d[w]=500,d[v]=16,d),E={play:"Play",pause:"Pause"},C=32;function P(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var x,_,O=function(t){function e(){var n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=P(this,t.call.apply(t,[this].concat(o))),a.drawPixel=function(t,e,n,r){var o=4*(t+e*a.props.width),i=function(t,e){if(m.length!==e){m.length=e;for(var n=0;n<e;n+=1)m[n]=h(n/e)}return m[t]||y}(n,r),s=i.r,c=i.g,l=i.b,u=a.canvasData.data;u[o]=s,u[o+1]=c,u[o+2]=l},a.paint=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.field,e=a.props,n=e.width,r=e.height,o=e.states;a.canvasData=a.canvasContext.getImageData(0,0,n,r);for(var i=0;i<n;i+=1)for(var s=0;s<r;s+=1)t[i]&&a.drawPixel(i,s,t[i][s],o);a.canvasContext.putImageData(a.canvasData,0,0)},a.refCanvas=function(t){a.canvasContext=t.getContext("2d"),a.canvasContext.fillStyle="#000",a.canvasContext.fillRect(0,0,a.props.width,a.props.height)},P(a,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.paint()},e.prototype.componentDidUpdate=function(){this.paint()},e.prototype.render=function(){return r.a.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")},e}(r.a.PureComponent),S=n(4),N=n.n(S),j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};function k(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var A=r.a.createElement("p",null,r.a.createElement("em",null,"Press Space or click field for play/pause")),D=r.a.createElement("p",null,r.a.createElement("small",null,"This experiment is made using ",r.a.createElement("a",{href:"https://www.npmjs.com/package/state-control",title:"npm package"},"state-control"),".")),F=(_=x=function(t){function e(){var n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=k(this,t.call.apply(t,[this].concat(i))),a.state={width:a.props.width,height:a.props.height,states:a.props.states,status:E.pause},a.field=null,a.canvas=r.a.createRef(),a.getActionName=function(){return a.state.status===E.play?E.pause:E.play},a.randomizeField=function(){a.field=u(a.state)},a.processKey=function(t){t.keyCode===C&&(t.preventDefault(),a.handlePlay())},a.nextStep=function(){try{a.field=f(j({},a.state,{field:a.field}))}catch(t){a.field=u(a.state),a.setState({status:E.pause})}a.canvas.current.paint(a.field),a.state.status===E.play&&requestAnimationFrame(a.nextStep)},a.handleNew=function(){a.randomizeField(),a.canvas.current.paint(a.field)},a.handleNext=function(){a.field=f(j({},a.state,{field:a.field})),a.canvas.current.paint(a.field)},a.handlePlay=function(){switch(a.state.status){case E.play:a.setState({status:E.pause});break;case E.pause:a.setState({status:E.play},a.nextStep)}},a.changeHandler=function(t,e){var n;a.setState(((n={})[t]=e,n))},a.selectAll=function(t){return t.setSelectionRange(0,t.value.length)},k(a,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){this.randomizeField(),this.handlePlay(),document.addEventListener("keydown",this.processKey)},e.prototype.render=function(){return r.a.createElement("div",null,r.a.createElement(l.a,{state:this.state,onChange:this.changeHandler,onFocus:this.selectAll},r.a.createElement(l.b,{id:b,label:"Field width",defaultNum:1}),r.a.createElement(l.b,{id:w,label:"Field height",defaultNum:1}),r.a.createElement(l.b,{id:v,label:"Number of states",defaultNum:1})),r.a.createElement("div",{onClick:this.handlePlay,onKeyDown:this.processKey,className:N.a.field,role:"presentation",title:this.getActionName()},r.a.createElement(O,{width:this.state.width,height:this.state.height,field:this.field,states:this.state.states,ref:this.canvas})),A,r.a.createElement("button",{type:"button",className:N.a.bigButton,onClick:this.handleNew},"New"),r.a.createElement("button",{type:"button",className:N.a.bigButton,onClick:this.handlePlay},this.getActionName()),this.state.status===E.pause&&r.a.createElement("button",{type:"button",className:N.a.bigButton,onClick:this.handleNext},"Next step"),D)},e}(a.PureComponent),x.defaultProps=j({},g),_),M=r.a.createElement(c,null,r.a.createElement(F,null));Object(o.render)(r.a.createElement(function(){return M},null),document.querySelector("#app"));var R=new Stats;document.body.appendChild(R.dom),requestAnimationFrame(function t(){R.update(),requestAnimationFrame(t)})}},[[18,2,1]]]);
//# sourceMappingURL=app.0e840bcb.js.map