(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{33:function(e,t,n){"use strict";var r;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return s});var a={width:"width",height:"height",states:"states",status:"status"},i=(o(r={},a.width,700),o(r,a.height,700),o(r,a.states,16),r),u={play:"Play",pause:"Pause"},s=32},34:function(e,t,n){var r=n(35);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o);r.locals&&(e.exports=r.locals)},35:function(e,t,n){(t=e.exports=n(2)(!0)).push([e.i,".GriffeathMachine__field__1wxML {\n  display: inline-block;\n  cursor: pointer;\n  margin-bottom: 0.7em;\n}\n\n.GriffeathMachine__bigButton__1Dk5W {\n  margin-right: 2em;\n  padding: 0.6em 1.2em;\n}\n","",{version:3,sources:["GriffeathMachine.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,eAAe;EACf,oBAAoB;AACtB;;AAEA;EACE,iBAAiB;EACjB,oBAAoB;AACtB",file:"GriffeathMachine.css",sourcesContent:[".field {\n  display: inline-block;\n  cursor: pointer;\n  margin-bottom: 0.7em;\n}\n\n.bigButton {\n  margin-right: 2em;\n  padding: 0.6em 1.2em;\n}\n"]}]),t.locals={field:"GriffeathMachine__field__1wxML",bigButton:"GriffeathMachine__bigButton__1Dk5W"}},36:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(0),o=n.n(r),a=n(1),i=n.n(a),u=n(37),s=n.n(u);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=this,o=(e=f(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==c(o)&&"function"!=typeof o?p(r):o,h(p(n),"paint",function(e){var t=n.props,r=t.width,o=t.height,a=t.states,i=r*o;n.colorsOfField=new Uint32Array(i);for(var u=0;u<i;u+=1){var c=s()(e[u],a),l=c.r,f=c.g,p=c.b;n.colorsOfField[u]=255<<24|p<<16|f<<8|l}var d=new ImageData(new Uint8ClampedArray(n.colorsOfField.buffer),r,o);n.canvasContext.putImageData(d,0,0)}),h(p(n),"refCanvas",function(e){n.canvasContext=e&&e.getContext("2d")}),h(p(n),"canvasContext",void 0),h(p(n),"colorsOfField",void 0),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}])&&l(n.prototype,r),a&&l(n,a),t}();h(b,"propTypes",{width:i.a.number.isRequired,height:i.a.number.isRequired,states:i.a.number.isRequired})},37:function(e,t,n){const r=n(40),o={r:0,g:0,b:0},a=[];e.exports=function(e,t,n){if(!a[t]){a[t]=[];for(let e=0;e<=t;e+=1)a[t].push(r(e/t))}return a[t][e]||n||o}},38:function(e,t,n){"use strict";function r(e){for(var t=e.width,n=e.height,r=e.states,o=t*n,a=new Int8Array(o),i=0;i<o;i+=1)a[i]=Math.floor(Math.random()*r);return a}function o(e,t){return e<0?e+t:e>=t?e-t:e}function a(e,t,n,r,a,i,u){var s=r[e],c=o(s+1,u);return r[t+o(n-1,i)*a]===c||r[t+o(n+1,i)*a]===c||r[o(t-1,a)+n*a]===c||r[o(t+1,a)+n*a]===c?c:s}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var i=function(e){for(var t=e.field,n=e.width,r=e.height,o=e.states,i=new Int8Array(n*r),u=0;u<r;u+=1)for(var s=u*n,c=0;c<n;c+=1){var l=c+s;i[l]=a(l,c,u,t,n,r,o)}return i}},81:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(0),o=n.n(r),a=n(1),i=n.n(a),u=n(44),s=n(33),c=n(34),l=n.n(c),f=n(36),p=n(38);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return r=this,a=(e=b(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==d(a)&&"function"!=typeof a?y(r):a,w(y(n),"state",{width:n.props.width,height:n.props.height,states:n.props.states,status:s.d.pause}),w(y(n),"worker",null),w(y(n),"field",null),w(y(n),"canvas",o.a.createRef()),w(y(n),"initializeWorker",function(){n.worker=new Worker("./worker.js"),n.worker.addEventListener("message",n.updateField),n.worker.addEventListener("error",n.handleError)}),w(y(n),"getActionName",function(){return n.state.status===s.d.play?s.d.pause:s.d.play}),w(y(n),"processKey",function(e){e.keyCode===s.c&&(e.preventDefault(),n.handlePlay())}),w(y(n),"updateField",function(e){var t=e.data;n.field=t,n.canvas.current.paint(n.field),n.state.status===s.d.play&&n.handleNext()}),w(y(n),"handleError",function(e){e.preventDefault(),n.setState({status:s.d.pause},n.handleNew)}),w(y(n),"makeNewField",function(){n.initializeWorker(),n.updateField({data:Object(p.a)(n.state)})}),w(y(n),"handleNew",function(){n.worker.terminate(),n.makeNewField()}),w(y(n),"handleNext",function(){var e=n.state,t=e.width,r=e.height,o=e.states;n.worker.postMessage({field:n.field,width:t,height:r,states:o})}),w(y(n),"handlePlay",function(){switch(n.state.status){case s.d.play:n.setState({status:s.d.pause});break;case s.d.pause:n.setState({status:s.d.play},n.handleNext)}}),w(y(n),"changeHandler",function(e,t){n.setState(w({},e,t))}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["PureComponent"]),n=t,(a=[{key:"componentDidMount",value:function(){this.makeNewField(),this.handlePlay(),document.addEventListener("keydown",this.processKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.processKey),this.worker.terminate()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(u.a,{state:this.state,onChange:this.changeHandler},o.a.createElement(u.b,{id:s.b.width,label:"Field width",defaultNum:1}),o.a.createElement(u.b,{id:s.b.height,label:"Field height",defaultNum:1}),o.a.createElement(u.b,{id:s.b.states,label:"Number of states",defaultNum:1})),o.a.createElement("div",{onClick:this.handlePlay,onKeyDown:this.processKey,className:l.a.field,role:"presentation",title:this.getActionName()},o.a.createElement(f.a,{width:this.state.width,height:this.state.height,states:this.state.states,ref:this.canvas})),o.a.createElement("p",null,o.a.createElement("em",null,"Press Space or click field for play / pause")),o.a.createElement("button",{type:"button",className:l.a.bigButton,onClick:this.handleNew},"New"),o.a.createElement("button",{type:"button",className:l.a.bigButton,onClick:this.handlePlay},this.getActionName()),this.state.status===s.d.pause&&o.a.createElement("button",{type:"button",className:l.a.bigButton,onClick:this.handleNext},"Next step"))}}])&&h(n.prototype,a),i&&h(n,i),t}();w(v,"propTypes",{width:i.a.number.isRequired,height:i.a.number.isRequired,states:i.a.number.isRequired}),w(v,"defaultProps",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}({},s.a))}}]);