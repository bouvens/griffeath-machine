(this.webpackChunkgriffeath_machine=this.webpackChunkgriffeath_machine||[]).push([[119],{270:function(e,t,s){"use strict";s.d(t,{A:function(){return l}});var i=s(540),a=s(556),n=s.n(a),r=s(195),h=s(563),u=s(431);function l(e){let{state:t,onChange:s,onReset:a,onPlayPause:n,onNextStep:l}=e;return(0,i.useEffect)((()=>{const e=e=>{switch(e.key){case h.Ry:e.preventDefault(),e.getModifierState(h.ZF)?l():n();break;case h.eu:e.preventDefault(),a()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),i.createElement(i.Fragment,null,i.createElement(r.Wi,{state:t,onChange:s},i.createElement(r.pd,{id:h.Bq.width,label:"Field width",defaultNum:1}),i.createElement(r.pd,{id:h.Bq.height,label:"Field height",defaultNum:1}),i.createElement(r.pd,{id:h.Bq.states,label:"Number of states",defaultNum:1}),i.createElement(r.Jl,{id:h.Bq.shuffle,label:"Shuffle colors"})),i.createElement("p",null,i.createElement("span",{onClick:a,role:"button"},i.createElement("span",{className:u.A.key},"Enter"),i.createElement("span",{className:u.A.activeDescription},"New (Reset)"))),i.createElement("p",null,i.createElement("span",{onClick:n,role:"button"},i.createElement("span",{className:u.A.key},"Space"),i.createElement("span",{className:u.A.activeDescription},"Play / Pause"))),i.createElement("p",{className:t.status!==h.f.pause?u.A.hidden:void 0},i.createElement("span",{onClick:l,role:"button"},i.createElement("span",{className:u.A.key},"Shift")," + ",i.createElement("span",{className:u.A.key},"Space"),i.createElement("span",{className:u.A.activeDescription},"One step forward"))))}l.propTypes={state:n().exact({width:n().number.isRequired,height:n().number.isRequired,states:n().number.isRequired,shuffle:n().bool.isRequired,status:n().string.isRequired}).isRequired,onChange:n().func.isRequired,onReset:n().func.isRequired,onPlayPause:n().func.isRequired,onNextStep:n().func.isRequired}},563:function(e,t,s){"use strict";s.d(t,{Bq:function(){return i},Ry:function(){return h},ZF:function(){return u},eu:function(){return r},f:function(){return a},qN:function(){return n}});const i={width:"width",height:"height",states:"states",shuffle:"shuffle"},a={play:"Play",pause:"Pause"},n={[i.width]:1200,[i.height]:700,[i.states]:18,[i.shuffle]:!1},r="Enter",h=" ",u="Shift"},353:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var i=s(540),a=s(563),n=s(1),r=s(270),h=s(431),u=s(556),l=s.n(u),o=s(176);function c(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends i.PureComponent{constructor(){super(...arguments),c(this,"canvasContext",void 0),c(this,"uInt32Array",void 0),c(this,"drawPixel",((e,t,s,i)=>{const a=e+t*this.props.width,{r:n,g:r,b:h}=(0,o.w)(s,i,this.props.shuffle);this.uInt32Array[a]=255<<24|h<<16|r<<8|n})),c(this,"paint",(e=>{const{width:t,height:s,states:i}=this.props;this.uInt32Array=new Uint32Array(t*s);for(let a=0;a<t;a+=1)for(let t=0;t<s;t+=1)e[a]&&this.drawPixel(a,t,e[a][t],i);const a=new ImageData(new Uint8ClampedArray(this.uInt32Array.buffer),t,s);this.canvasContext.putImageData(a,0,0)})),c(this,"refCanvas",(e=>{this.canvasContext=e&&e.getContext("2d")}))}render(){return i.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}function f(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}c(d,"propTypes",{width:l().number.isRequired,height:l().number.isRequired,states:l().number.isRequired,shuffle:l().bool.isRequired});class p extends i.PureComponent{constructor(){super(...arguments),f(this,"field",null),f(this,"canvas",i.createRef()),f(this,"makeGetUpdatedField",void 0),f(this,"fieldUpdater",void 0),f(this,"state",{...a.qN,status:a.f.play}),f(this,"updateFieldSize",(e=>{let{width:t=this.state.width,height:s=this.state.height}=e;const{status:i}=this.state;this.fieldUpdater=this.makeGetUpdatedField(t,s),this.setState({status:a.f.pause},(()=>{this.handleNew(),this.setState({status:i})}))})),f(this,"updateField",(()=>{const{width:e,height:t,states:s}=this.state;this.field=this.fieldUpdater(this.field,e,t,s)})),f(this,"nextStep",(()=>{try{this.updateField(),this.state.status===a.f.play&&(this.requestID=requestAnimationFrame(this.nextStep)),this.canvas.current.paint(this.field)}catch(e){cancelAnimationFrame(this.requestID),this.field=(0,n.Qt)(this.state),this.setState({status:a.f.pause})}})),f(this,"handleNew",(()=>{this.field=(0,n.Qt)(this.state),this.canvas.current.paint(this.field)})),f(this,"handleNext",(()=>{this.updateField(),this.canvas.current.paint(this.field)})),f(this,"handlePlay",(()=>{switch(this.state.status){case a.f.play:this.setState({status:a.f.pause});break;case a.f.pause:this.setState({status:a.f.play},this.nextStep)}})),f(this,"changeHandler",((e,t)=>{let s=t;switch(e){case a.Bq.width:this.updateFieldSize({width:s});break;case a.Bq.height:this.updateFieldSize({height:s});break;case a.Bq.states:s>255&&(s=255)}this.setState({[e]:s})}))}componentDidMount(){this.handleNew(),Promise.all([s.e(788),s.e(415)]).then(s.bind(s,985)).then((e=>{const{width:t,height:s}=this.state;this.makeGetUpdatedField=e.makeGetUpdatedField,this.fieldUpdater=this.makeGetUpdatedField(t,s),this.nextStep()}))}componentWillUnmount(){cancelAnimationFrame(this.requestID)}render(){return i.createElement(i.Fragment,null,i.createElement(r.A,{state:this.state,onChange:this.changeHandler,onReset:this.handleNew,onPlayPause:this.handlePlay,onNextStep:this.handleNext}),i.createElement("div",{onClick:this.handlePlay,className:h.A.field,role:"presentation",title:"‚èØ"},i.createElement(d,{width:this.state.width,height:this.state.height,states:this.state.states,shuffle:this.state.shuffle,ref:this.canvas})))}}},1:function(e,t,s){"use strict";function i(e){let{width:t,height:s,states:i}=e;const a=[];for(let e=0;e<t;e+=1){a[e]=[];for(let t=0;t<s;t+=1)a[e][t]=Math.floor(Math.random()*i)}return a}s.d(t,{Qt:function(){return i},s2:function(){return n}});const a=(e,t)=>e<0?e+t:e%t;const n=e=>{let{field:t,width:s,height:i,states:n}=e;return t.map(((e,r)=>e.map(((e,h)=>function(e,t,s,i,n,r,h){const u=a(e+1,h);return i[t][a(s-1,r)]===u||i[t][a(s+1,r)]===u||i[a(t-1,n)][s]===u||i[a(t+1,n)][s]===u?u:e}(e,r,h,t,s,i,n)))))}},176:function(e,t,s){const{mapColor:i}=s(336),a={r:0,g:0,b:0},n=[],r=[];e.exports.w=(e,t,s=!1,h=a)=>{const u=s?r:n;if(!u[t]){u[t]=[];for(let e=0;e<t;e++)u[t].push(i(e/t));s&&(u[t]=function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}(u[t]))}return u[t][e]||h}}}]);