(this.webpackChunkgriffeath_machine=this.webpackChunkgriffeath_machine||[]).push([[119],{270:function(e,t,s){"use strict";s.d(t,{A:function(){return l}});var a=s(540),i=s(556),n=s.n(i),r=s(195),h=s(563),u=s(431);function l(e){let{state:t,onChange:s,onReset:i,onPlayPause:n,onNextStep:l}=e;return(0,a.useEffect)((()=>{const e=e=>{switch(e.key){case h.Ry:e.preventDefault(),e.getModifierState(h.ZF)?l():n();break;case h.eu:e.preventDefault(),i()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),a.createElement(a.Fragment,null,a.createElement(r.Wi,{state:t,onChange:s},a.createElement(r.pd,{id:h.Bq.width,label:"Field width",defaultNum:1}),a.createElement(r.pd,{id:h.Bq.height,label:"Field height",defaultNum:1}),a.createElement(r.pd,{id:h.Bq.states,label:"Number of states",defaultNum:1}),a.createElement(r.Jl,{id:h.Bq.shuffle,label:"Shuffle colors"})),a.createElement("p",null,a.createElement("span",{onClick:i,role:"button"},a.createElement("span",{className:u.A.key},"Enter"),a.createElement("span",{className:u.A.activeDescription},"New (Reset)"))),a.createElement("p",null,a.createElement("span",{onClick:n,role:"button"},a.createElement("span",{className:u.A.key},"Space"),a.createElement("span",{className:u.A.activeDescription},"Play / Pause"))),a.createElement("p",{className:t.status!==h.f.pause?u.A.hidden:void 0},a.createElement("span",{onClick:l,role:"button"},a.createElement("span",{className:u.A.key},"Shift")," + ",a.createElement("span",{className:u.A.key},"Space"),a.createElement("span",{className:u.A.activeDescription},"One step forward"))))}l.propTypes={state:n().exact({width:n().number.isRequired,height:n().number.isRequired,states:n().number.isRequired,shuffle:n().bool.isRequired,status:n().string.isRequired}).isRequired,onChange:n().func.isRequired,onReset:n().func.isRequired,onPlayPause:n().func.isRequired,onNextStep:n().func.isRequired}},563:function(e,t,s){"use strict";s.d(t,{Bq:function(){return a},Ry:function(){return h},ZF:function(){return u},eu:function(){return r},f:function(){return i},qN:function(){return n}});const a={width:"width",height:"height",states:"states",shuffle:"shuffle"},i={play:"Play",pause:"Pause"},n={[a.width]:1200,[a.height]:700,[a.states]:18,[a.shuffle]:!1},r="Enter",h=" ",u="Shift"},353:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(540),i=s(563),n=s(1),r=s(270),h=s(431),u=s(556),l=s.n(u),c=s(176);function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o extends a.PureComponent{constructor(){super(...arguments),d(this,"canvasContext",void 0),d(this,"uInt32Array",void 0),d(this,"drawPixel",((e,t,s,a)=>{const i=e+t*this.props.width,{r:n,g:r,b:h}=(0,c.w)(s,a,this.props.shuffle);this.uInt32Array[i]=255<<24|h<<16|r<<8|n})),d(this,"paint",(e=>{const{width:t,height:s,states:a}=this.props;this.uInt32Array=new Uint32Array(t*s);for(let i=0;i<t;i+=1)for(let t=0;t<s;t+=1)e[i]&&this.drawPixel(i,t,e[i][t],a);const i=new ImageData(new Uint8ClampedArray(this.uInt32Array.buffer),t,s);this.canvasContext.putImageData(i,0,0)})),d(this,"refCanvas",(e=>{this.canvasContext=e&&e.getContext("2d")}))}render(){return a.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}d(o,"propTypes",{width:l().number.isRequired,height:l().number.isRequired,states:l().number.isRequired,shuffle:l().bool.isRequired});class p extends a.PureComponent{constructor(){super(...arguments),f(this,"field",null),f(this,"canvas",a.createRef()),f(this,"makeGetUpdatedField",void 0),f(this,"fieldUpdater",void 0),f(this,"state",{...i.qN,status:i.f.play}),f(this,"updateFieldSize",(e=>{let{width:t=this.state.width,height:s=this.state.height}=e;const{status:a}=this.state;this.fieldUpdater=this.makeGetUpdatedField(t,s),this.setState({status:i.f.pause},(()=>{this.handleNew(),this.setState({status:a})}))})),f(this,"updateField",(()=>{const{width:e,height:t,states:s}=this.state;this.field=this.fieldUpdater(this.field,e,t,s)})),f(this,"nextStep",(()=>{try{this.updateField(),this.state.status===i.f.play&&(this.requestID=requestAnimationFrame(this.nextStep)),this.canvas.current.paint(this.field)}catch(e){cancelAnimationFrame(this.requestID),this.field=(0,n.Qt)(this.state),this.setState({status:i.f.pause})}})),f(this,"handleNew",(()=>{this.field=(0,n.Qt)(this.state),this.canvas.current.paint(this.field)})),f(this,"handleNext",(()=>{this.updateField(),this.canvas.current.paint(this.field)})),f(this,"handlePlay",(()=>{switch(this.state.status){case i.f.play:this.setState({status:i.f.pause});break;case i.f.pause:this.setState({status:i.f.play},this.nextStep)}})),f(this,"changeHandler",((e,t)=>{let s=t;switch(e){case i.Bq.width:this.updateFieldSize({width:s});break;case i.Bq.height:this.updateFieldSize({height:s});break;case i.Bq.states:s>255&&(s=255)}this.setState({[e]:s})}))}componentDidMount(){this.handleNew(),Promise.all([s.e(788),s.e(415)]).then(s.bind(s,985)).then((e=>{const{width:t,height:s}=this.state;this.makeGetUpdatedField=e.makeGetUpdatedField,this.fieldUpdater=this.makeGetUpdatedField(t,s),this.nextStep()}))}componentWillUnmount(){cancelAnimationFrame(this.requestID)}render(){return a.createElement(a.Fragment,null,a.createElement(r.A,{state:this.state,onChange:this.changeHandler,onReset:this.handleNew,onPlayPause:this.handlePlay,onNextStep:this.handleNext}),a.createElement("div",{onClick:this.handlePlay,className:h.A.field,role:"presentation",title:"‚èØ"},a.createElement(o,{width:this.state.width,height:this.state.height,states:this.state.states,shuffle:this.state.shuffle,ref:this.canvas})))}}},1:function(e,t,s){"use strict";function a(e){let{width:t,height:s,states:a}=e;const i=[];for(let e=0;e<t;e+=1){i[e]=[];for(let t=0;t<s;t+=1)i[e][t]=Math.floor(Math.random()*a)}return i}s.d(t,{Qt:function(){return a},s2:function(){return n}});const i=(e,t)=>e<0?e+t:e%t;const n=e=>{let{field:t,width:s,height:a,states:n}=e;return t.map(((e,r)=>e.map(((e,h)=>function(e,t,s,a,n,r,h){const u=i(e+1,h);return a[t][i(s-1,r)]===u||a[t][i(s+1,r)]===u||a[i(t-1,n)][s]===u||a[i(t+1,n)][s]===u?u:e}(e,r,h,t,s,a,n)))))}},176:function(e,t,s){const{mapColor:a}=s(336),i={r:0,g:0,b:0},n=[],r=[];e.exports.w=(e,t,s=!1,h=i)=>{const u=s?r:n;if(!u[t]){u[t]=[];for(let e=0;e<t;e++)u[t].push(a(e/t));s&&(u[t]=function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}(u[t]))}return u[t][e]||h}}}]);