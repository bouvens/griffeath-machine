(this.webpackChunkgriffeath_machine=this.webpackChunkgriffeath_machine||[]).push([[682],{130:function(e,t,s){"use strict";s.d(t,{A:function(){return l}});var n=s(540),a=s(556),i=s.n(a),r=s(176);function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l extends n.PureComponent{constructor(){super(...arguments),u(this,"canvasContext",void 0),u(this,"colorsOfField",void 0),u(this,"paint",(e=>{const{width:t,height:s,states:n,shuffle:a}=this.props,i=t*s;this.colorsOfField=new Uint32Array(i);for(let t=0;t<i;t+=1){const{r:s,g:i,b:u}=(0,r.w)(e[t],n,a);this.colorsOfField[t]=255<<24|u<<16|i<<8|s}const u=new ImageData(new Uint8ClampedArray(this.colorsOfField.buffer),t,s);this.canvasContext.putImageData(u,0,0)})),u(this,"refCanvas",(e=>{this.canvasContext=e&&e.getContext("2d",{desynchronized:!0})}))}render(){return n.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}u(l,"propTypes",{width:i().number.isRequired,height:i().number.isRequired,states:i().number.isRequired,shuffle:i().bool.isRequired})},270:function(e,t,s){"use strict";s.d(t,{A:function(){return h}});var n=s(540),a=s(556),i=s.n(a),r=s(195),u=s(563),l=s(431);function h(e){let{state:t,onChange:s,onReset:a,onPlayPause:i,onNextStep:h}=e;return(0,n.useEffect)((()=>{const e=e=>{switch(e.key){case u.Ry:e.preventDefault(),e.getModifierState(u.ZF)?h():i();break;case u.eu:e.preventDefault(),a()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),n.createElement(n.Fragment,null,n.createElement(r.Wi,{state:t,onChange:s},n.createElement(r.pd,{id:u.Bq.width,label:"Field width",defaultNum:1}),n.createElement(r.pd,{id:u.Bq.height,label:"Field height",defaultNum:1}),n.createElement(r.pd,{id:u.Bq.states,label:"Number of states",defaultNum:1}),n.createElement(r.Jl,{id:u.Bq.shuffle,label:"Shuffle colors"})),n.createElement("p",null,n.createElement("span",{onClick:a,role:"button"},n.createElement("span",{className:l.A.key},"Enter"),n.createElement("span",{className:l.A.activeDescription},"New (Reset)"))),n.createElement("p",null,n.createElement("span",{onClick:i,role:"button"},n.createElement("span",{className:l.A.key},"Space"),n.createElement("span",{className:l.A.activeDescription},"Play / Pause"))),n.createElement("p",{className:t.status!==u.f.pause?l.A.hidden:void 0},n.createElement("span",{onClick:h,role:"button"},n.createElement("span",{className:l.A.key},"Shift")," + ",n.createElement("span",{className:l.A.key},"Space"),n.createElement("span",{className:l.A.activeDescription},"One step forward"))))}h.propTypes={state:i().exact({width:i().number.isRequired,height:i().number.isRequired,states:i().number.isRequired,shuffle:i().bool.isRequired,status:i().string.isRequired}).isRequired,onChange:i().func.isRequired,onReset:i().func.isRequired,onPlayPause:i().func.isRequired,onNextStep:i().func.isRequired}},775:function(e,t,s){"use strict";function n(e){let{width:t,height:s,states:n}=e;const a=t*s,i=new Uint8Array(a);for(let e=0;e<a;e+=1)i[e]=Math.floor(Math.random()*n);return i}function a(e,t){return e<0?e+t:e>=t?e-t:e}function i(e,t,s,n,i,r,u){const l=n[e],h=a(l+1,u);return n[t+a(s-1,r)*i]===h||n[t+a(s+1,r)*i]===h||n[a(t-1,i)+s*i]===h||n[a(t+1,i)+s*i]===h?h:l}s.d(t,{Qt:function(){return n},s2:function(){return r}});const r=e=>{let{field:t,width:s,height:n,states:a}=e;const r=new Uint8Array(s*n);for(let e=0;e<n;e+=1){const u=e*s;for(let l=0;l<s;l+=1){const h=l+u;r[h]=i(h,l,e,t,s,n,a)}}return r}},563:function(e,t,s){"use strict";s.d(t,{Bq:function(){return n},Ry:function(){return u},ZF:function(){return l},eu:function(){return r},f:function(){return a},qN:function(){return i}});const n={width:"width",height:"height",states:"states",shuffle:"shuffle"},a={play:"Play",pause:"Pause"},i={[n.width]:1200,[n.height]:700,[n.states]:18,[n.shuffle]:!1},r="Enter",u=" ",l="Shift"},116:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(540),a=s(563),i=s(775),r=s(130),u=s(270),l=s(431);function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c extends n.PureComponent{constructor(){super(...arguments),h(this,"field",null),h(this,"canvas",n.createRef()),h(this,"state",{...a.qN,status:a.f.play}),h(this,"nextStep",(()=>{try{this.field=(0,i.s2)({...this.state,field:this.field}),this.state.status===a.f.play&&(this.requestID=requestAnimationFrame(this.nextStep))}catch(e){cancelAnimationFrame(this.requestID),this.field=(0,i.Qt)(this.state),this.setState({status:a.f.pause})}this.canvas.current.paint(this.field)})),h(this,"handleNew",(()=>{this.field=(0,i.Qt)(this.state),this.canvas.current.paint(this.field)})),h(this,"handleNext",(()=>{this.field=(0,i.s2)({...this.state,field:this.field}),this.canvas.current.paint(this.field)})),h(this,"handlePlay",(()=>{switch(this.state.status){case a.f.play:this.setState({status:a.f.pause});break;case a.f.pause:this.setState({status:a.f.play},this.nextStep)}})),h(this,"changeHandler",((e,t)=>{let s=t;e===a.Bq.states&&s>255&&(s=255),this.setState({[e]:s})}))}componentDidMount(){this.handleNew(),this.nextStep()}componentWillUnmount(){cancelAnimationFrame(this.requestID)}render(){return n.createElement(n.Fragment,null,n.createElement(u.A,{state:this.state,onChange:this.changeHandler,onReset:this.handleNew,onPlayPause:this.handlePlay,onNextStep:this.handleNext}),n.createElement("div",{onClick:this.handlePlay,className:l.A.field,role:"presentation",title:"â¯"},n.createElement(r.A,{width:this.state.width,height:this.state.height,states:this.state.states,shuffle:this.state.shuffle,ref:this.canvas})))}}},176:function(e,t,s){const{mapColor:n}=s(336),a={r:0,g:0,b:0},i=[],r=[];e.exports.w=(e,t,s=!1,u=a)=>{const l=s?r:i;if(!l[t]){l[t]=[];for(let e=0;e<t;e++)l[t].push(n(e/t));s&&(l[t]=function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}(l[t]))}return l[t][e]||u}}}]);