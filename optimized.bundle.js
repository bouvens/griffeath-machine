(this.webpackChunkgriffeath_machine=this.webpackChunkgriffeath_machine||[]).push([[682],{130:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var s=n(540),i=n(556),a=n.n(i),r=n(176);function u(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends s.PureComponent{constructor(){super(...arguments),u(this,"canvasContext",void 0),u(this,"colorsOfField",void 0),u(this,"paint",(e=>{const{width:t,height:n,states:s,shuffle:i}=this.props,a=t*n;this.colorsOfField=new Uint32Array(a);for(let t=0;t<a;t+=1){const{r:n,g:a,b:u}=(0,r.w)(e[t],s,i);this.colorsOfField[t]=255<<24|u<<16|a<<8|n}const u=new ImageData(new Uint8ClampedArray(this.colorsOfField.buffer),t,n);this.canvasContext.putImageData(u,0,0)})),u(this,"refCanvas",(e=>{this.canvasContext=e&&e.getContext("2d",{desynchronized:!0})}))}render(){return s.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}u(o,"propTypes",{width:a().number.isRequired,height:a().number.isRequired,states:a().number.isRequired,shuffle:a().bool.isRequired})},270:function(e,t,n){"use strict";n.d(t,{A:function(){return l}});var s=n(540),i=n(556),a=n.n(i),r=n(195),u=n(563),o=n(431);function l(e){let{state:t,onChange:n,onReset:i,onPlayPause:a,onNextStep:l}=e;return(0,s.useEffect)((()=>{const e=e=>{switch(e.key){case u.Ry:e.preventDefault(),e.getModifierState(u.ZF)?l():a();break;case u.eu:e.preventDefault(),i()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),s.createElement(s.Fragment,null,s.createElement(r.Wi,{state:t,onChange:n},s.createElement(r.pd,{id:u.Bq.width,label:"Field width",defaultNum:1}),s.createElement(r.pd,{id:u.Bq.height,label:"Field height",defaultNum:1}),s.createElement(r.pd,{id:u.Bq.states,label:"Number of states",defaultNum:1}),s.createElement(r.Jl,{id:u.Bq.shuffle,label:"Shuffle colors"})),s.createElement("p",null,s.createElement("span",{onClick:i,role:"button"},s.createElement("span",{className:o.A.key},"Enter"),s.createElement("span",{className:o.A.activeDescription},"New (Reset)"))),s.createElement("p",null,s.createElement("span",{onClick:a,role:"button"},s.createElement("span",{className:o.A.key},"Space"),s.createElement("span",{className:o.A.activeDescription},"Play / Pause"))),s.createElement("p",{className:t.status!==u.f.pause?o.A.hidden:void 0},s.createElement("span",{onClick:l,role:"button"},s.createElement("span",{className:o.A.key},"Shift")," + ",s.createElement("span",{className:o.A.key},"Space"),s.createElement("span",{className:o.A.activeDescription},"One step forward"))))}l.propTypes={state:a().exact({width:a().number.isRequired,height:a().number.isRequired,states:a().number.isRequired,shuffle:a().bool.isRequired,status:a().string.isRequired}).isRequired,onChange:a().func.isRequired,onReset:a().func.isRequired,onPlayPause:a().func.isRequired,onNextStep:a().func.isRequired}},775:function(e,t,n){"use strict";function s(e){let{width:t,height:n,states:s}=e;const i=t*n,a=new Uint8Array(i);for(let e=0;e<i;e+=1)a[e]=Math.floor(Math.random()*s);return a}function i(e,t){return e<0?e+t:e>=t?e-t:e}function a(e,t,n,s,a,r,u){const o=s[e],l=i(o+1,u);return s[t+i(n-1,r)*a]===l||s[t+i(n+1,r)*a]===l||s[i(t-1,a)+n*a]===l||s[i(t+1,a)+n*a]===l?l:o}n.d(t,{Qt:function(){return s},s2:function(){return r}});const r=e=>{let{field:t,width:n,height:s,states:i}=e;const r=new Uint8Array(n*s);for(let e=0;e<s;e+=1){const u=e*n;for(let o=0;o<n;o+=1){const l=o+u;r[l]=a(l,o,e,t,n,s,i)}}return r}},563:function(e,t,n){"use strict";n.d(t,{Bq:function(){return s},Ry:function(){return u},ZF:function(){return o},eu:function(){return r},f:function(){return i},qN:function(){return a}});const s={width:"width",height:"height",states:"states",shuffle:"shuffle"},i={play:"Play",pause:"Pause"},a={[s.width]:1200,[s.height]:700,[s.states]:18,[s.shuffle]:!1},r="Enter",u=" ",o="Shift"},116:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(540),i=n(563),a=n(775),r=n(130),u=n(270),o=n(431);function l(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends s.PureComponent{constructor(){super(...arguments),l(this,"field",null),l(this,"canvas",s.createRef()),l(this,"state",{...i.qN,status:i.f.play}),l(this,"nextStep",(()=>{try{this.field=(0,a.s2)({...this.state,field:this.field}),this.state.status===i.f.play&&(this.requestID=requestAnimationFrame(this.nextStep))}catch(e){cancelAnimationFrame(this.requestID),this.field=(0,a.Qt)(this.state),this.setState({status:i.f.pause})}this.canvas.current.paint(this.field)})),l(this,"handleNew",(()=>{this.field=(0,a.Qt)(this.state),this.canvas.current.paint(this.field)})),l(this,"handleNext",(()=>{this.field=(0,a.s2)({...this.state,field:this.field}),this.canvas.current.paint(this.field)})),l(this,"handlePlay",(()=>{switch(this.state.status){case i.f.play:this.setState({status:i.f.pause});break;case i.f.pause:this.setState({status:i.f.play},this.nextStep)}})),l(this,"changeHandler",((e,t)=>{let n=t;e===i.Bq.states&&n>255&&(n=255),this.setState({[e]:n})}))}componentDidMount(){this.handleNew(),this.nextStep()}componentWillUnmount(){cancelAnimationFrame(this.requestID)}render(){return s.createElement(s.Fragment,null,s.createElement(u.A,{state:this.state,onChange:this.changeHandler,onReset:this.handleNew,onPlayPause:this.handlePlay,onNextStep:this.handleNext}),s.createElement("div",{onClick:this.handlePlay,className:o.A.field,role:"presentation",title:"⏯"},s.createElement(r.A,{width:this.state.width,height:this.state.height,states:this.state.states,shuffle:this.state.shuffle,ref:this.canvas})))}}},176:function(e,t,n){const{mapColor:s}=n(336),i={r:0,g:0,b:0},a=[],r=[];e.exports.w=(e,t,n=!1,u=i)=>{const o=n?r:a;if(!o[t]){o[t]=[];for(let e=0;e<t;e++)o[t].push(s(e/t));n&&(o[t]=function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}(o[t]))}return o[t][e]||u}}}]);