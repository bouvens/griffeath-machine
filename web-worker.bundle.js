(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{25:function(t,e,r){"use strict";var n;function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return u}));var a={width:"width",height:"height",states:"states",status:"status"},i=(o(n={},a.width,1200),o(n,a.height,700),o(n,a.states,16),n),s={play:"Play",pause:"Pause"},u=32},26:function(t,e,r){const n=r(28),o={r:0,g:0,b:0},a=[];t.exports=function(t,e,r){if(!a[e]){a[e]=[];for(let t=0;t<=e;t+=1)a[e].push(n(t/e))}return a[e][t]||r||o}},33:function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var n=r(0),o=r.n(n),a=r(1),i=r.n(a),s=r(26),u=r.n(s);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,t);var e,r,n,a=p(i);function i(){var t;f(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return m(y(t=a.call.apply(a,[this].concat(r))),"canvasContext",void 0),m(y(t),"colorsOfField",void 0),m(y(t),"paint",(function(e){var r=t.props,n=r.width,o=r.height,a=r.states,i=n*o;t.colorsOfField=new Uint32Array(i);for(var s=0;s<i;s+=1){var c=u()(e[s],a),f=c.r,l=c.g,h=c.b;t.colorsOfField[s]=255<<24|h<<16|l<<8|f}var p=new ImageData(new Uint8ClampedArray(t.colorsOfField.buffer),n,o);t.canvasContext.putImageData(p,0,0)})),m(y(t),"refCanvas",(function(e){t.canvasContext=e&&e.getContext("2d",{desynchronized:!0})})),t}return e=i,(r=[{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}])&&l(e.prototype,r),n&&l(e,n),i}(o.a.PureComponent);m(w,"propTypes",{width:i.a.number.isRequired,height:i.a.number.isRequired,states:i.a.number.isRequired})},34:function(t,e,r){"use strict";function n(t){for(var e=t.width,r=t.height,n=t.states,o=e*r,a=new Uint8Array(o),i=0;i<o;i+=1)a[i]=Math.floor(Math.random()*n);return a}function o(t,e){return t<0?t+e:t>=e?t-e:t}function a(t,e,r,n,a,i,s){var u=n[t],c=o(u+1,s);return n[e+o(r-1,i)*a]===c||n[e+o(r+1,i)*a]===c||n[o(e-1,a)+r*a]===c||n[o(e+1,a)+r*a]===c?c:u}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));var i=function(t){for(var e=t.field,r=t.width,n=t.height,o=t.states,i=new Uint8Array(r*n),s=0;s<n;s+=1)for(var u=s*r,c=0;c<r;c+=1){var f=c+u;i[f]=a(f,c,s,e,r,n,o)}return i}},53:function(t,e){const r={handleError:console.error,numberOfWorkers:navigator.hardwareConcurrency,ArrayConstructor:Array};t.exports=function(t,e,{handleError:n=r.handleError,numberOfWorkers:o=r.numberOfWorkers,ArrayConstructor:a=r.ArrayConstructor}=r){let i,s,u=[];function c(){i=0,s=[]}this.threads=o;const f=()=>{let t=0;for(let e=0;e<this.threads;e++)t+=s[e].length;let r=0,n=a===Array?[]:new a(t);for(let t=0;t<this.threads;t++)n.concat?n=n.concat(s[t]):n.set(s[t],r),r+=s[t].length;e(n),c()},l=t=>({data:e})=>{s[t]=e,i+=1,i===this.threads&&f()};this.terminate=()=>(u.forEach(t=>{t.terminate()}),u=[],this);const h=t=>{this.terminate(),c(),n(t)},p=()=>{for(let e=0;e<this.threads;e++)u[e]=new t,u[e].addEventListener("message",l(e)),u[e].addEventListener("error",h)};this.start=(t,e)=>{let r=e%this.threads;const n=(e-r)/this.threads;c(),u.length||p();for(let e=0;e<this.threads;e++){const o=r+n;u[e].postMessage({...t,from:0===e?0:r,to:o}),r=o}return this}}},54:function(t,e,r){t.exports=function(){return new Worker(r.p+"8b041db5059bc3600ecd.worker.js")}},68:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return C}));var n=r(0),o=r.n(n),a=r(1),i=r.n(a),s=r(32),u=r(53),c=r.n(u),f=r(54),l=r.n(f),h=r(25),p=r(23),d=r.n(p),y=r(33),b=r(34);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return E(this,r)}}function E(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(i,t);var e,r,n,a=P(i);function i(){var t;v(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return S(k(t=a.call.apply(a,[this].concat(r))),"field",null),S(k(t),"canvas",o.a.createRef()),S(k(t),"frameTimes",[]),S(k(t),"workers",void 0),S(k(t),"state",{width:t.props.width,height:t.props.height,states:t.props.states,status:h.d.pause,fps:0}),S(k(t),"updateFPS",(function(){for(var e=performance.now();t.frameTimes[0]<=e-1e3&&t.frameTimes.length>0;)t.frameTimes.shift();t.frameTimes.push(e),t.setState((function(){return{fps:t.frameTimes.length}}))})),S(k(t),"updateField",(function(e){t.field=e,t.canvas.current.paint(t.field),t.state.status===h.d.play?(t.updateFPS(),t.handleNext()):t.setState({fps:0})})),S(k(t),"handleError",(function(){t.setState({status:h.d.pause},t.makeNewField)})),S(k(t),"getActionName",(function(){return t.state.status===h.d.play?h.d.pause:h.d.play})),S(k(t),"processKey",(function(e){e.keyCode===h.c&&(e.preventDefault(),t.handlePlay())})),S(k(t),"updateFieldRandomly",(function(){t.updateField(Object(b.a)(t.state))})),S(k(t),"makeNewField",(function(){t.workers.terminate(),t.updateFieldRandomly()})),S(k(t),"handleNext",(function(){var e=t.state,r=e.width,n=e.height,o=e.states;t.workers.start({field:t.field,width:r,height:n,states:o},t.field.length)})),S(k(t),"handlePlay",(function(){switch(t.state.status){case h.d.play:t.setState({status:h.d.pause});break;case h.d.pause:t.setState({status:h.d.play},t.handleNext)}})),S(k(t),"changeHandler",(function(e,r){t.setState(S({},e,r))})),t}return e=i,(r=[{key:"componentDidMount",value:function(){this.workers=new c.a(l.a,this.updateField,{handleError:this.handleError,ArrayConstructor:Uint8Array}),this.updateFieldRandomly(),this.handlePlay(),document.addEventListener("keydown",this.processKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.processKey),this.workers.terminate()}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.workers&&o.a.createElement("p",null,this.workers.threads," workers started"),o.a.createElement(s.a,{state:this.state,onChange:this.changeHandler},o.a.createElement(s.b,{id:h.b.width,label:"Field width",defaultNum:1}),o.a.createElement(s.b,{id:h.b.height,label:"Field height",defaultNum:1}),o.a.createElement(s.b,{id:h.b.states,label:"Number of states",defaultNum:1})),o.a.createElement("div",{onClick:this.handlePlay,onKeyDown:this.processKey,className:d.a.field,role:"presentation",title:this.getActionName()},o.a.createElement(y.a,{width:this.state.width,height:this.state.height,states:this.state.states,ref:this.canvas})),o.a.createElement("div",{className:d.a.fps},this.state.fps," FPS",o.a.createElement("br",null),"in the canvas"),o.a.createElement("p",null,o.a.createElement("em",null,"Press Space or click field for play / pause")),o.a.createElement("button",{type:"button",className:d.a.bigButton,onClick:this.makeNewField},"New"),o.a.createElement("button",{type:"button",className:d.a.bigButton,onClick:this.handlePlay},this.getActionName()),this.state.status===h.d.pause&&o.a.createElement("button",{type:"button",className:d.a.bigButton,onClick:this.handleNext},"Next step"))}}])&&g(e.prototype,r),n&&g(e,n),i}(n.PureComponent);S(C,"propTypes",{width:i.a.number.isRequired,height:i.a.number.isRequired,states:i.a.number.isRequired}),S(C,"defaultProps",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},h.a))}}]);