(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{31:function(e,t,r){"use strict";var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return u}));var o={width:"width",height:"height",states:"states",status:"status"},i=(a(n={},o.width,1200),a(n,o.height,700),a(n,o.states,16),n),s={play:"Play",pause:"Pause"},u=32},32:function(e,t,r){const n=r(34),a={r:0,g:0,b:0},o=[];e.exports=function(e,t,r){if(!o[t]){o[t]=[];for(let e=0;e<=t;e+=1)o[t].push(n(e/t))}return o[t][e]||r||a}},40:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(0),a=r.n(n),o=r(1),i=r.n(o),s=r(32),u=r.n(s);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){function t(){var e,r,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=this,a=(e=f(t)).call.apply(e,[this].concat(i)),r=!a||"object"!==c(a)&&"function"!=typeof a?h(n):a,d(h(r),"canvasContext",void 0),d(h(r),"colorsOfField",void 0),d(h(r),"paint",(function(e){var t=r.props,n=t.width,a=t.height,o=t.states,i=n*a;r.colorsOfField=new Uint32Array(i);for(var s=0;s<i;s+=1){var c=u()(e[s],o),l=c.r,f=c.g,h=c.b;r.colorsOfField[s]=255<<24|h<<16|f<<8|l}var p=new ImageData(new Uint8ClampedArray(r.colorsOfField.buffer),n,a);r.canvasContext.putImageData(p,0,0)})),d(h(r),"refCanvas",(function(e){r.canvasContext=e&&e.getContext("2d",{desynchronized:!0})})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.a.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}])&&l(r.prototype,n),o&&l(r,o),t}(a.a.PureComponent);d(y,"propTypes",{width:i.a.number.isRequired,height:i.a.number.isRequired,states:i.a.number.isRequired})},41:function(e,t,r){"use strict";function n(e){for(var t=e.width,r=e.height,n=e.states,a=t*r,o=new Uint8Array(a),i=0;i<a;i+=1)o[i]=Math.floor(Math.random()*n);return o}function a(e,t){return e<0?e+t:e>=t?e-t:e}function o(e,t,r,n,o,i,s){var u=n[e],c=a(u+1,s);return n[t+a(r-1,i)*o]===c||n[t+a(r+1,i)*o]===c||n[a(t-1,o)+r*o]===c||n[a(t+1,o)+r*o]===c?c:u}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var i=function(e){for(var t=e.field,r=e.width,n=e.height,a=e.states,i=new Uint8Array(r*n),s=0;s<n;s+=1)for(var u=s*r,c=0;c<r;c+=1){var l=c+u;i[l]=o(l,c,s,t,r,n,a)}return i}},65:function(e,t){const r={handleError:console.error,numberOfWorkers:navigator.hardwareConcurrency,ArrayConstructor:Array};e.exports=function(e,t,{handleError:n=r.handleError,numberOfWorkers:a=r.numberOfWorkers,ArrayConstructor:o=r.ArrayConstructor}=r){let i,s,u=[];function c(){i=0,s=[]}this.threads=a;const l=()=>{let e=0;for(let t=0;t<this.threads;t++)e+=s[t].length;let r=0,n=o===Array?[]:new o(e);for(let e=0;e<this.threads;e++)n.concat?n=n.concat(s[e]):n.set(s[e],r),r+=s[e].length;t(n),c()},f=e=>({data:t})=>{s[e]=t,i+=1,i===this.threads&&l()};this.terminate=()=>(u.forEach(e=>{e.terminate()}),u=[],this);const h=e=>{this.terminate(),c(),n(e)},p=()=>{for(let t=0;t<this.threads;t++)u[t]=new e,u[t].addEventListener("message",f(t)),u[t].addEventListener("error",h)};this.start=(e,t)=>{let r=t%this.threads;const n=(t-r)/this.threads;c(),u.length||p();for(let t=0;t<this.threads;t++){const a=r+n;u[t].postMessage({...e,from:0===t?0:r,to:a}),r=a}return this}}},66:function(e,t,r){e.exports=function(){return new Worker(r.p+"2cf7a9c0192a9ed652ca.worker.js")}},80:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return k}));var n=r(0),a=r.n(n),o=r(1),i=r.n(o),s=r(38),u=r(65),c=r.n(u),l=r(66),f=r.n(l),h=r(31),p=r(29),d=r.n(p),y=r(40),b=r(41);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){function t(){var e,r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=this,o=(e=g(t)).call.apply(e,[this].concat(s)),r=!o||"object"!==w(o)&&"function"!=typeof o?O(n):o,P(O(r),"field",null),P(O(r),"canvas",a.a.createRef()),P(O(r),"frameTimes",[]),P(O(r),"workers",void 0),P(O(r),"state",{width:r.props.width,height:r.props.height,states:r.props.states,status:h.d.pause,fps:0}),P(O(r),"updateFPS",(function(){for(var e=performance.now();r.frameTimes[0]<=e-1e3&&r.frameTimes.length>0;)r.frameTimes.shift();r.frameTimes.push(e),r.setState((function(){return{fps:r.frameTimes.length}}))})),P(O(r),"updateField",(function(e){r.field=e,r.canvas.current.paint(r.field),r.state.status===h.d.play?(r.updateFPS(),r.handleNext()):r.setState({fps:0})})),P(O(r),"handleError",(function(){r.setState({status:h.d.pause},r.makeNewField)})),P(O(r),"getActionName",(function(){return r.state.status===h.d.play?h.d.pause:h.d.play})),P(O(r),"processKey",(function(e){e.keyCode===h.c&&(e.preventDefault(),r.handlePlay())})),P(O(r),"updateFieldRandomly",(function(){r.updateField(Object(b.a)(r.state))})),P(O(r),"makeNewField",(function(){r.workers.terminate(),r.updateFieldRandomly()})),P(O(r),"handleNext",(function(){var e=r.state,t=e.width,n=e.height,a=e.states;r.workers.start({field:r.field,width:t,height:n,states:a},r.field.length)})),P(O(r),"handlePlay",(function(){switch(r.state.status){case h.d.play:r.setState({status:h.d.pause});break;case h.d.pause:r.setState({status:h.d.play},r.handleNext)}})),P(O(r),"changeHandler",(function(e,t){r.setState(P({},e,t))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.workers=new c.a(f.a,this.updateField,{handleError:this.handleError,ArrayConstructor:Uint8Array}),this.updateFieldRandomly(),this.handlePlay(),document.addEventListener("keydown",this.processKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.processKey),this.workers.terminate()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.workers&&a.a.createElement("p",null,this.workers.threads," workers started"),a.a.createElement(s.a,{state:this.state,onChange:this.changeHandler},a.a.createElement(s.b,{id:h.b.width,label:"Field width",defaultNum:1}),a.a.createElement(s.b,{id:h.b.height,label:"Field height",defaultNum:1}),a.a.createElement(s.b,{id:h.b.states,label:"Number of states",defaultNum:1})),a.a.createElement("div",{onClick:this.handlePlay,onKeyDown:this.processKey,className:d.a.field,role:"presentation",title:this.getActionName()},a.a.createElement(y.a,{width:this.state.width,height:this.state.height,states:this.state.states,ref:this.canvas})),a.a.createElement("div",{className:d.a.fps},this.state.fps," FPS",a.a.createElement("br",null),"in the canvas"),a.a.createElement("p",null,a.a.createElement("em",null,"Press Space or click field for play / pause")),a.a.createElement("button",{type:"button",className:d.a.bigButton,onClick:this.makeNewField},"New"),a.a.createElement("button",{type:"button",className:d.a.bigButton,onClick:this.handlePlay},this.getActionName()),this.state.status===h.d.pause&&a.a.createElement("button",{type:"button",className:d.a.bigButton,onClick:this.handleNext},"Next step"))}}])&&v(r.prototype,n),o&&v(r,o),t}(n.PureComponent);P(k,"propTypes",{width:i.a.number.isRequired,height:i.a.number.isRequired,states:i.a.number.isRequired}),P(k,"defaultProps",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},h.a))}}]);