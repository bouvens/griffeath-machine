"use strict";(this.webpackChunkgriffeath_machine=this.webpackChunkgriffeath_machine||[]).push([[278],{270:function(e,t,a){a.d(t,{A:function(){return l}});var s=a(540),n=a(556),i=a.n(n),r=a(195),h=a(563),u=a(431);function l(e){let{state:t,onChange:a,onReset:n,onPlayPause:i,onNextStep:l}=e;return(0,s.useEffect)((()=>{const e=e=>{switch(e.key){case h.Ry:e.preventDefault(),e.getModifierState(h.ZF)?l():i();break;case h.eu:e.preventDefault(),n()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),s.createElement(s.Fragment,null,s.createElement(r.Wi,{state:t,onChange:a},s.createElement(r.pd,{id:h.Bq.width,label:"Field width",defaultNum:1}),s.createElement(r.pd,{id:h.Bq.height,label:"Field height",defaultNum:1}),s.createElement(r.pd,{id:h.Bq.states,label:"Number of states",defaultNum:1}),s.createElement(r.Jl,{id:h.Bq.shuffle,label:"Shuffle colors"})),s.createElement("p",null,s.createElement("span",{onClick:n,role:"button"},s.createElement("span",{className:u.A.key},"Enter"),s.createElement("span",{className:u.A.activeDescription},"New (Reset)"))),s.createElement("p",null,s.createElement("span",{onClick:i,role:"button"},s.createElement("span",{className:u.A.key},"Space"),s.createElement("span",{className:u.A.activeDescription},"Play / Pause"))),s.createElement("p",{className:t.status!==h.f.pause?u.A.hidden:void 0},s.createElement("span",{onClick:l,role:"button"},s.createElement("span",{className:u.A.key},"Shift")," + ",s.createElement("span",{className:u.A.key},"Space"),s.createElement("span",{className:u.A.activeDescription},"One step forward"))))}l.propTypes={state:i().exact({width:i().number.isRequired,height:i().number.isRequired,states:i().number.isRequired,shuffle:i().bool.isRequired,status:i().string.isRequired}).isRequired,onChange:i().func.isRequired,onReset:i().func.isRequired,onPlayPause:i().func.isRequired,onNextStep:i().func.isRequired}},563:function(e,t,a){a.d(t,{Bq:function(){return s},Ry:function(){return h},ZF:function(){return u},eu:function(){return r},f:function(){return n},qN:function(){return i}});const s={width:"width",height:"height",states:"states",shuffle:"shuffle"},n={play:"Play",pause:"Pause"},i={[s.width]:1200,[s.height]:700,[s.states]:18,[s.shuffle]:!1},r="Enter",h=" ",u="Shift"},587:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=a(540),n=a(563),i=a(1),r=a(556),h=a.n(r),u=a(336);function l(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends s.PureComponent{constructor(){super(...arguments),l(this,"canvasContext",void 0),l(this,"canvasData",void 0),l(this,"drawPixel",((e,t,a)=>{const s=4*(e+t*this.props.width),{r:n,g:i,b:r}=(0,u.mapColor)(a);this.canvasData.data[s]=n,this.canvasData.data[s+1]=i,this.canvasData.data[s+2]=r,this.canvasData.data[s+3]=255})),l(this,"paint",(e=>{this.canvasData=this.canvasContext.getImageData(0,0,this.props.width,this.props.height);for(let t=0;t<this.props.width;t+=1)for(let a=0;a<this.props.height;a+=1)e[t]&&this.drawPixel(t,a,e[t][a]/this.props.states);this.canvasContext.putImageData(this.canvasData,0,0)})),l(this,"refCanvas",(e=>{this.canvasContext=e&&e.getContext("2d")}))}render(){return s.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}l(o,"propTypes",{width:h().number.isRequired,height:h().number.isRequired,states:h().number.isRequired});var c=a(270),f=a(431);function d(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends s.PureComponent{constructor(){super(...arguments),d(this,"field",null),d(this,"canvas",s.createRef()),d(this,"state",{...n.qN,status:n.f.play}),d(this,"nextStep",(()=>{try{this.field=(0,i.s2)({...this.state,field:this.field}),this.state.status===n.f.play&&(this.requestID=requestAnimationFrame(this.nextStep))}catch(e){cancelAnimationFrame(this.requestID),this.field=(0,i.Qt)(this.state),this.setState({status:n.f.pause})}this.canvas.current.paint(this.field)})),d(this,"handleNew",(()=>{this.field=(0,i.Qt)(this.state),this.canvas.current.paint(this.field)})),d(this,"handleNext",(()=>{this.field=(0,i.s2)({...this.state,field:this.field}),this.canvas.current.paint(this.field)})),d(this,"handlePlay",(()=>{switch(this.state.status){case n.f.play:this.setState({status:n.f.pause});break;case n.f.pause:this.setState({status:n.f.play},this.nextStep)}})),d(this,"changeHandler",((e,t)=>{this.setState({[e]:t})}))}componentDidMount(){this.handleNew(),this.nextStep()}componentWillUnmount(){cancelAnimationFrame(this.requestID)}render(){return s.createElement(s.Fragment,null,s.createElement(c.A,{state:this.state,onChange:this.changeHandler,onReset:this.handleNew,onPlayPause:this.handlePlay,onNextStep:this.handleNext}),s.createElement("div",{onClick:this.handlePlay,className:f.A.field,role:"presentation",title:"‚èØ"},s.createElement(o,{width:this.state.width,height:this.state.height,field:this.field,states:this.state.states,ref:this.canvas})))}}},1:function(e,t,a){function s(e){let{width:t,height:a,states:s}=e;const n=[];for(let e=0;e<t;e+=1){n[e]=[];for(let t=0;t<a;t+=1)n[e][t]=Math.floor(Math.random()*s)}return n}a.d(t,{Qt:function(){return s},s2:function(){return i}});const n=(e,t)=>e<0?e+t:e%t;const i=e=>{let{field:t,width:a,height:s,states:i}=e;return t.map(((e,r)=>e.map(((e,h)=>function(e,t,a,s,i,r,h){const u=n(e+1,h);return s[t][n(a-1,r)]===u||s[t][n(a+1,r)]===u||s[n(t-1,i)][a]===u||s[n(t+1,i)][a]===u?u:e}(e,r,h,t,a,s,i)))))}}}]);