"use strict";(this.webpackChunkgriffeath_machine=this.webpackChunkgriffeath_machine||[]).push([[278],{270:function(e,t,a){a.d(t,{A:function(){return u}});var s=a(540),n=a(556),i=a.n(n),r=a(195),h=a(563),l=a(431);function u(e){let{state:t,onChange:a,onReset:n,onPlayPause:i,onNextStep:u}=e;return(0,s.useEffect)((()=>{const e=e=>{switch(e.key){case h.Ry:e.preventDefault(),e.getModifierState(h.ZF)?u():i();break;case h.eu:e.preventDefault(),n()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),s.createElement(s.Fragment,null,s.createElement(r.Wi,{state:t,onChange:a},s.createElement(r.pd,{id:h.Bq.width,label:"Field width",defaultNum:1}),s.createElement(r.pd,{id:h.Bq.height,label:"Field height",defaultNum:1}),s.createElement(r.pd,{id:h.Bq.states,label:"Number of states",defaultNum:1}),s.createElement(r.Jl,{id:h.Bq.shuffle,label:"Shuffle colors"})),s.createElement("p",null,s.createElement("span",{onClick:n,role:"button"},s.createElement("span",{className:l.A.key},"Enter"),s.createElement("span",{className:l.A.activeDescription},"New (Reset)"))),s.createElement("p",null,s.createElement("span",{onClick:i,role:"button"},s.createElement("span",{className:l.A.key},"Space"),s.createElement("span",{className:l.A.activeDescription},"Play / Pause"))),s.createElement("p",{className:t.status!==h.f.pause?l.A.hidden:void 0},s.createElement("span",{onClick:u,role:"button"},s.createElement("span",{className:l.A.key},"Shift")," + ",s.createElement("span",{className:l.A.key},"Space"),s.createElement("span",{className:l.A.activeDescription},"One step forward"))))}u.propTypes={state:i().exact({width:i().number.isRequired,height:i().number.isRequired,states:i().number.isRequired,shuffle:i().bool.isRequired,status:i().string.isRequired}).isRequired,onChange:i().func.isRequired,onReset:i().func.isRequired,onPlayPause:i().func.isRequired,onNextStep:i().func.isRequired}},563:function(e,t,a){a.d(t,{Bq:function(){return s},Ry:function(){return h},ZF:function(){return l},eu:function(){return r},f:function(){return n},qN:function(){return i}});const s={width:"width",height:"height",states:"states",shuffle:"shuffle"},n={play:"Play",pause:"Pause"},i={[s.width]:1200,[s.height]:700,[s.states]:18,[s.shuffle]:!1},r="Enter",h=" ",l="Shift"},587:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=a(540),n=a(563),i=a(1),r=a(556),h=a.n(r),l=a(336);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.PureComponent{constructor(){super(...arguments),u(this,"canvasContext",void 0),u(this,"canvasData",void 0),u(this,"drawPixel",((e,t,a)=>{const s=4*(e+t*this.props.width),{r:n,g:i,b:r}=(0,l.mapColor)(a);this.canvasData.data[s]=n,this.canvasData.data[s+1]=i,this.canvasData.data[s+2]=r,this.canvasData.data[s+3]=255})),u(this,"paint",(e=>{this.canvasData=this.canvasContext.getImageData(0,0,this.props.width,this.props.height);for(let t=0;t<this.props.width;t+=1)for(let a=0;a<this.props.height;a+=1)e[t]&&this.drawPixel(t,a,e[t][a]/this.props.states);this.canvasContext.putImageData(this.canvasData,0,0)})),u(this,"refCanvas",(e=>{this.canvasContext=e&&e.getContext("2d")}))}render(){return s.createElement("canvas",{ref:this.refCanvas,width:this.props.width,height:this.props.height},"You are using an outdated browser without support of canvas elements.")}}u(c,"propTypes",{width:h().number.isRequired,height:h().number.isRequired,states:h().number.isRequired});var o=a(270),d=a(431);function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends s.PureComponent{constructor(){super(...arguments),f(this,"field",null),f(this,"canvas",s.createRef()),f(this,"state",{...n.qN,status:n.f.play}),f(this,"nextStep",(()=>{try{this.field=(0,i.s2)({...this.state,field:this.field}),this.state.status===n.f.play&&(this.requestID=requestAnimationFrame(this.nextStep))}catch(e){cancelAnimationFrame(this.requestID),this.field=(0,i.Qt)(this.state),this.setState({status:n.f.pause})}this.canvas.current.paint(this.field)})),f(this,"handleNew",(()=>{this.field=(0,i.Qt)(this.state),this.canvas.current.paint(this.field)})),f(this,"handleNext",(()=>{this.field=(0,i.s2)({...this.state,field:this.field}),this.canvas.current.paint(this.field)})),f(this,"handlePlay",(()=>{switch(this.state.status){case n.f.play:this.setState({status:n.f.pause});break;case n.f.pause:this.setState({status:n.f.play},this.nextStep)}})),f(this,"changeHandler",((e,t)=>{this.setState({[e]:t})}))}componentDidMount(){this.handleNew(),this.nextStep()}componentWillUnmount(){cancelAnimationFrame(this.requestID)}render(){return s.createElement(s.Fragment,null,s.createElement(o.A,{state:this.state,onChange:this.changeHandler,onReset:this.handleNew,onPlayPause:this.handlePlay,onNextStep:this.handleNext}),s.createElement("div",{onClick:this.handlePlay,className:d.A.field,role:"presentation",title:"‚èØ"},s.createElement(c,{width:this.state.width,height:this.state.height,field:this.field,states:this.state.states,ref:this.canvas})))}}},1:function(e,t,a){function s(e){let{width:t,height:a,states:s}=e;const n=[];for(let e=0;e<t;e+=1){n[e]=[];for(let t=0;t<a;t+=1)n[e][t]=Math.floor(Math.random()*s)}return n}a.d(t,{Qt:function(){return s},s2:function(){return i}});const n=(e,t)=>e<0?e+t:e%t;const i=e=>{let{field:t,width:a,height:s,states:i}=e;return t.map(((e,r)=>e.map(((e,h)=>function(e,t,a,s,i,r,h){const l=n(e+1,h);return s[t][n(a-1,r)]===l||s[t][n(a+1,r)]===l||s[n(t-1,i)][a]===l||s[n(t+1,i)][a]===l?l:e}(e,r,h,t,a,s,i)))))}}}]);